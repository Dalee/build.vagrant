install
text
cdrom

keyboard us
lang en_US.UTF-8
timezone Europe/Moscow --isUtc

auth --enableshadow --passalgo=sha512
rootpw --plaintext you_will_never_guess

selinux --disabled
firewall --disabled
services --enabled=sshd
network --onboot=yes --device=eth0 --bootproto=dhcp --noipv6

user --name=vagrant --password=vagrant --plaintext --gecos="Vagrant"
bootloader --location=mbr --boot-drive=sda
clearpart --all --initlabel
autopart --type=plain

%packages --ignoremissing
@core
wget
-wpa_supplicant
-postfix
-tuned
%end

%post
echo "vagrant        ALL=(ALL)       NOPASSWD: ALL" >> /etc/sudoers.d/vagrant
echo "Defaults:vagrant !requiretty"                 >> /etc/sudoers.d/vagrant
chmod 0440 /etc/sudoers.d/vagrant
sed -i "s/^.*requiretty/#Defaults requiretty/" /etc/sudoers
sed -i "s/GRUB_TIMEOUT=5/GRUB_TIMEOUT=0/" "/etc/default/grub"
grub2-mkconfig -o "/boot/grub2/grub.cfg"
%end

reboot
